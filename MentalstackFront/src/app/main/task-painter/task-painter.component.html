<div class="d-flex flex-column main-wrapper h-100 mb-3">
    <cdk-virtual-scroll-viewport itemSize="50" style="height: 100%; width: 100%;">
        <accordion [isAnimated]="true">
            <accordion-group *cdkVirtualFor="let task of tasks" style="margin-bottom: 10px">
                <button class="btn btn-link clearfix" accordion-heading>
                    <span class="task-header"> {{task.endDate | date: 'mediumDate'}}, {{task.endTime | date: 'shortTime'}} </span>
                </button>
                <div class="d-flex flex-row justify-content-start align-items-start">
                    <div style="margin-top: 8px; margin-right: 10px;">
                        <mat-checkbox></mat-checkbox>
                    </div>
                    <div class="w-100">
                        <div class="d-flex flex-column">
                            <div class="task-title">
                                <h2>{{task.title}}</h2>
                            </div>
                            <div>
                                <mat-form-field class="w-100">
                                    <input matInput placeholder="Enter description..." [(ngModel)]="task.description">
                                </mat-form-field>
                            </div>
                            <div class="d-flex flex-row">
                                <div class="priority-wrapper d-flex flex-row align-items-center" style="margin-right: 30px;">
                                    <div class="priority-circle" [ngStyle]="{'background-color': taskService.getTaskColor(task.priority)}"></div>
                                    <div>
                                        <span>{{task.priority}}</span>
                                    </div>
                                </div>
                                <div style="margin-right: 30px;" class="time-wrapper d-flex flex-row align-items-center">
                                    <div class="time-icon">
                                        <mat-icon>access_time</mat-icon>
                                    </div>
                                    <div>
                                        <span class="task-time">{{task.endTime | date: 'shortTime'}}</span>
                                    </div>
                                </div>
                                <div>
                                    <button (click)="saveDescription(task.description, task.id)" class="btn btn-outline-success">Сохранить</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </accordion-group>
        </accordion>
    </cdk-virtual-scroll-viewport>
</div>
